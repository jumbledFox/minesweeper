<html lang="en">
<head>
    <meta charset="utf-8">
    <title>minesweeper</title>
    <style>
        html,
        body,
        canvas {
            width:  100%;
            height: 100%;
            overflow: hidden;
            background: black;
            z-index: 0;
        }
        div {
            background: red;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width:  600px;
            min-height: 400px;
        }
    </style>
</head>
<body>
    <button id="view-fullscreen">Fullscreen</button>
    <div>
        <canvas id="glcanvas" tabindex='1' hidden></canvas>
        <script src="https://not-fl3.github.io/miniquad-samples/mq_js_bundle.js"></script>
        <script type="module">
            import init, { set_wasm } from "./minesweeper.js";
            async function impl_run() {
                let wbg = await init();
                miniquad_add_plugin({
                    register_plugin: (a) => (a.wbg = wbg),
                    on_init: () => set_wasm(wasm_exports),
                    version: "0.0.1",
                    name: "wbg",
                });
                load("./minesweeper_bg.wasm");
            }
            window.run = function() {
                document.getElementById("run-container").remove();
                document.getElementById("glcanvas").removeAttribute("hidden");
                document.getElementById("glcanvas").focus();
                impl_run();
            }
        </script>
        <div id="run-container">
            <button onclick="run()">Run Game</button>
        </div>
        <script>
            canvas.oncontextmenu = function(e) { e.preventDefault(); e.stopPropagation(); }

            var viewFullScreen = document.getElementById("view-fullscreen");
            if (viewFullScreen) {
                viewFullScreen.addEventListener("click", function() {
                    if (canvas.requestFullscreen) {
                        canvas.requestFullscreen();
                    } else if (canvas.msRequestFullscreen) {
                        canvas.msRequestFullscreen();
                    } else if (canvas.mozRequestFullScreen) {
                        canvas.mozRequestFullScreen();
                    } else if (canvas.webkitRequestFullScreen) {
                        canvas.webkitRequestFullScreen();
                    }
                })
            }
        </script>
    </div>
</body>
</html>
